<!-- PWA Install Button + Fallback -->
<script>
let deferredPrompt;

// Dynamic PWA install
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;

    const btn = document.createElement('button');
    btn.innerText = 'ðŸ“² Install MedSuite';
    btn.style.position = 'fixed';
    btn.style.bottom = '20px';
    btn.style.right = '20px';
    btn.style.padding = '12px 20px';
    btn.style.backgroundColor = '#0a9396';
    btn.style.color = '#fff';
    btn.style.border = 'none';
    btn.style.borderRadius = '8px';
    btn.style.cursor = 'pointer';
    btn.style.zIndex = 9999;
    document.body.appendChild(btn);

    btn.addEventListener('click', async () => {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        const choice = await deferredPrompt.userChoice;
        console.log('User choice:', choice.outcome);
        deferredPrompt = null;
        btn.style.display = 'none';
    });
});

// Fallback for unsupported browsers
const fallbackBtn = document.createElement('button');
fallbackBtn.innerText = 'ðŸ“² Install MedSuite';
fallbackBtn.style.position = 'fixed';
fallbackBtn.style.bottom = '20px';
fallbackBtn.style.right = '20px';
fallbackBtn.style.padding = '12px 20px';
fallbackBtn.style.backgroundColor = '#e63946';
fallbackBtn.style.color = '#fff';
fallbackBtn.style.border = 'none';
fallbackBtn.style.borderRadius = '8px';
fallbackBtn.style.cursor = 'pointer';
fallbackBtn.style.zIndex = 9999;
fallbackBtn.onclick = () => alert('To install: On Android/Windows Chrome â†’ click â‹® â†’ Add to Home Screen. On iOS Safari â†’ Share â†’ Add to Home Screen.');
document.body.appendChild(fallbackBtn);
</script>
